"use strict";
exports.__esModule = true;
exports.splitIntoTwo = void 0;
var RTreeRectangle_1 = require("./RTreeRectangle");
var sortRectanglesByHilbertCoordinates_js_1 = require("../misc/sortRectanglesByHilbertCoordinates.js");
function splitIntoTwo(rectangles) {
    if (rectangles.length <= 1) {
        return rectangles;
    }
    var pivot = Math.floor(rectangles.length / 2);
    var sortedRectangles = (0, sortRectanglesByHilbertCoordinates_js_1.sortRectanglesByHilbertCoordinates)(rectangles);
    // console.log({ sortedRectangles, rectangles });
    var firstChildPartition = sortedRectangles.splice(0, pivot);
    var secondChildPartition = sortedRectangles;
    var sibling1Child = firstChildPartition[0];
    var sibling1 = new RTreeRectangle_1.RTreeRectangle({
        x: sibling1Child.x,
        y: sibling1Child.y,
        height: sibling1Child.height,
        width: sibling1Child.width
    });
    sibling1.insertChildren(firstChildPartition);
    var sibling2Child = secondChildPartition[0];
    var sibling2 = new RTreeRectangle_1.RTreeRectangle({
        x: sibling2Child.x,
        y: sibling2Child.y,
        height: sibling2Child.height,
        width: sibling2Child.width
    });
    sibling2.insertChildren(secondChildPartition);
    return [sibling1, sibling2];
}
exports.splitIntoTwo = splitIntoTwo;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BsaXRJbnRvVHdvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL3ItdHJlZS9zcGxpdEludG9Ud28udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsbURBQWtEO0FBQ2xELHVHQUFtRztBQUduRyxTQUFnQixZQUFZLENBQUMsVUFBaUM7SUFDNUQsSUFBSSxVQUFVLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtRQUMxQixPQUFPLFVBQVUsQ0FBQztLQUNuQjtJQUVELElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNoRCxJQUFNLGdCQUFnQixHQUFHLElBQUEsMEVBQWtDLEVBQUMsVUFBVSxDQUFDLENBQUM7SUFFeEUsaURBQWlEO0lBQ2pELElBQU0sbUJBQW1CLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM5RCxJQUFNLG9CQUFvQixHQUFHLGdCQUFnQixDQUFDO0lBRTlDLElBQU0sYUFBYSxHQUFHLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTdDLElBQU0sUUFBUSxHQUFHLElBQUksK0JBQWMsQ0FBQztRQUNsQyxDQUFDLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDbEIsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBQ2xCLE1BQU0sRUFBRSxhQUFhLENBQUMsTUFBTTtRQUM1QixLQUFLLEVBQUUsYUFBYSxDQUFDLEtBQUs7S0FDM0IsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBRzdDLElBQU0sYUFBYSxHQUFHLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTlDLElBQU0sUUFBUSxHQUFHLElBQUksK0JBQWMsQ0FBQztRQUNsQyxDQUFDLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDbEIsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBQ2xCLE1BQU0sRUFBRSxhQUFhLENBQUMsTUFBTTtRQUM1QixLQUFLLEVBQUUsYUFBYSxDQUFDLEtBQUs7S0FDM0IsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBRTlDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDOUIsQ0FBQztBQXBDRCxvQ0FvQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSVHJlZVJlY3RhbmdsZSB9IGZyb20gXCIuL1JUcmVlUmVjdGFuZ2xlXCI7XG5pbXBvcnQgeyBzb3J0UmVjdGFuZ2xlc0J5SGlsYmVydENvb3JkaW5hdGVzIH0gZnJvbSBcIi4uL21pc2Mvc29ydFJlY3RhbmdsZXNCeUhpbGJlcnRDb29yZGluYXRlcy5qc1wiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdEludG9Ud28ocmVjdGFuZ2xlczogQXJyYXk8UlRyZWVSZWN0YW5nbGU+KTogUlRyZWVSZWN0YW5nbGVbXSB7XG4gIGlmIChyZWN0YW5nbGVzLmxlbmd0aCA8PSAxKSB7XG4gICAgcmV0dXJuIHJlY3RhbmdsZXM7XG4gIH1cblxuICBjb25zdCBwaXZvdCA9IE1hdGguZmxvb3IocmVjdGFuZ2xlcy5sZW5ndGggLyAyKTtcbiAgY29uc3Qgc29ydGVkUmVjdGFuZ2xlcyA9IHNvcnRSZWN0YW5nbGVzQnlIaWxiZXJ0Q29vcmRpbmF0ZXMocmVjdGFuZ2xlcyk7XG5cbiAgLy8gY29uc29sZS5sb2coeyBzb3J0ZWRSZWN0YW5nbGVzLCByZWN0YW5nbGVzIH0pO1xuICBjb25zdCBmaXJzdENoaWxkUGFydGl0aW9uID0gc29ydGVkUmVjdGFuZ2xlcy5zcGxpY2UoMCwgcGl2b3QpO1xuICBjb25zdCBzZWNvbmRDaGlsZFBhcnRpdGlvbiA9IHNvcnRlZFJlY3RhbmdsZXM7XG5cbiAgY29uc3Qgc2libGluZzFDaGlsZCA9IGZpcnN0Q2hpbGRQYXJ0aXRpb25bMF07XG5cbiAgY29uc3Qgc2libGluZzEgPSBuZXcgUlRyZWVSZWN0YW5nbGUoe1xuICAgIHg6IHNpYmxpbmcxQ2hpbGQueCxcbiAgICB5OiBzaWJsaW5nMUNoaWxkLnksXG4gICAgaGVpZ2h0OiBzaWJsaW5nMUNoaWxkLmhlaWdodCxcbiAgICB3aWR0aDogc2libGluZzFDaGlsZC53aWR0aFxuICB9KTtcblxuICBzaWJsaW5nMS5pbnNlcnRDaGlsZHJlbihmaXJzdENoaWxkUGFydGl0aW9uKTtcblxuXG4gIGNvbnN0IHNpYmxpbmcyQ2hpbGQgPSBzZWNvbmRDaGlsZFBhcnRpdGlvblswXTtcblxuICBjb25zdCBzaWJsaW5nMiA9IG5ldyBSVHJlZVJlY3RhbmdsZSh7XG4gICAgeDogc2libGluZzJDaGlsZC54LFxuICAgIHk6IHNpYmxpbmcyQ2hpbGQueSxcbiAgICBoZWlnaHQ6IHNpYmxpbmcyQ2hpbGQuaGVpZ2h0LFxuICAgIHdpZHRoOiBzaWJsaW5nMkNoaWxkLndpZHRoXG4gIH0pO1xuXG4gIHNpYmxpbmcyLmluc2VydENoaWxkcmVuKHNlY29uZENoaWxkUGFydGl0aW9uKTtcblxuICByZXR1cm4gW3NpYmxpbmcxLCBzaWJsaW5nMl07XG59XG4iXX0=